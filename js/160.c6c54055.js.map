{"version":3,"file":"js/160.c6c54055.js","mappings":"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","sources":["webpack://@radiantearth/stac-browser/./src/components/Catalog.vue","webpack://@radiantearth/stac-browser/src/components/Catalog.vue","webpack://@radiantearth/stac-browser/./src/components/Catalog.vue?bc73","webpack://@radiantearth/stac-browser/./src/components/Catalog.vue?462e","webpack://@radiantearth/stac-browser/./node_modules/remove-markdown/index.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-card',{directives:[{name:\"b-visible\",rawName:\"v-b-visible.200\",value:(_vm.load),expression:\"load\",modifiers:{\"200\":true}}],class:_vm.classes,attrs:{\"no-body\":\"\",\"img-right\":_vm.isList}},[(_vm.hasImage)?_c('b-card-img',{staticClass:\"thumbnail\",attrs:{\"src\":_vm.thumbnail.href,\"alt\":_vm.thumbnail.title,\"crossorigin\":_vm.crossOriginMedia,\"right\":_vm.isList},on:{\"error\":_vm.hideBrokenImg}}):_vm._e(),_c('b-card-body',[_c('b-card-title',[_c('StacLink',{staticClass:\"stretched-link\",attrs:{\"data\":[_vm.data, _vm.catalog]}})],1),(_vm.data && (_vm.data.description || _vm.data.deprecated))?_c('b-card-text',{staticClass:\"intro\"},[(_vm.data.deprecated)?_c('b-badge',{staticClass:\"deprecated\",attrs:{\"variant\":\"warning\"}},[_vm._v(\"Deprecated\")]):_vm._e(),_vm._v(\" \"+_vm._s(_vm._f(\"stripCommonmark\")(_vm.data.description))+\" \")],1):_vm._e(),(_vm.temporalExtent)?_c('b-card-text',{staticClass:\"datetime\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.temporalExtent)}})]):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-card no-body :class=\"classes\" v-b-visible.200=\"load\" :img-right=\"isList\">\n    <b-card-img\n      v-if=\"hasImage\" class=\"thumbnail\"\n      :src=\"thumbnail.href\" :alt=\"thumbnail.title\" :crossorigin=\"crossOriginMedia\" :right=\"isList\"\n      @error=\"hideBrokenImg\"\n    />\n    <b-card-body>\n      <b-card-title>\n        <StacLink :data=\"[data, catalog]\" class=\"stretched-link\" />\n      </b-card-title>\n      <b-card-text v-if=\"data && (data.description || data.deprecated)\" class=\"intro\">\n        <b-badge v-if=\"data.deprecated\" variant=\"warning\" class=\"deprecated\">Deprecated</b-badge>\n        {{ data.description | stripCommonmark }}\n      </b-card-text>\n      <b-card-text v-if=\"temporalExtent\" class=\"datetime\"><span v-html=\"temporalExtent\" /></b-card-text>\n    </b-card-body>\n  </b-card>\n</template>\n\n<script>\nimport { mapGetters, mapState } from 'vuex';\nimport StacLink from './StacLink.vue';\nimport STAC from '../models/stac';\nimport removeMd from 'remove-markdown';\nimport { formatTemporalExtent } from '@radiantearth/stac-fields/formatters';\n\nexport default {\n  name: 'Catalog',\n  components: {\n    StacLink\n  },\n  filters: {\n    stripCommonmark(text) {\n      // Best-effort approach to remove some CommonMark (Markdown).\n      // Likely not perfect, but seems good enough for most cases.\n      return removeMd(text);\n    }\n  },\n  props: {\n    catalog: {\n      type: Object,\n      required: true\n    },\n    showThumbnail: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data() {\n    return {\n      // Lazy load thumbnails and not all at once.\n      // false = don't load yet, true = try to load it, null = image errored\n      thumbnailShown: false\n    };\n  },\n  computed: {\n    ...mapState(['crossOriginMedia', 'cardViewMode']),\n    ...mapGetters(['getStac']),\n    classes() {\n      let classes = ['catalog-card'];\n      if (!this.data) {\n        classes.push('queued');\n      }\n      if (this.data && this.data.deprecated) {\n        classes.push('deprecated');\n      }\n      if (this.hasImage) {\n        classes.push('has-thumbnail');\n      }\n      if (this.temporalExtent) {\n        classes.push('has-extent');\n      }\n      return classes;\n    },\n    isList() {\n      return this.cardViewMode === 'list';\n    },\n    hasImage() {\n      return this.showThumbnail && this.thumbnail && this.thumbnailShown;\n    },\n    data() {\n      if (this.catalog instanceof STAC) {\n        return this.catalog;\n      }\n      else {\n        return this.getStac(this.catalog.href);\n      }\n    },\n    thumbnail() {\n      if (this.data) {\n        let thumbnails = this.data.getThumbnails(true, 'thumbnail');\n        if (thumbnails.length > 0) {\n          return thumbnails[0];\n        }\n      }\n      return null;\n    },\n    temporalExtent() {\n      if (this.data?.isCollection() && this.data.extent?.temporal?.interval.length > 0) {\n        let extent = this.data.extent.temporal.interval[0];\n        if (Array.isArray(extent) && (typeof extent[0] === 'string' || typeof extent[1] === 'string')) {\n          return formatTemporalExtent(this.data.extent.temporal.interval[0], true);\n        }\n      }\n      return null;\n    }\n  },\n  methods: {\n    hideBrokenImg(event) {\n      console.log(`Hiding catalog thumbnail for ${event.srcElement.src} as it can't be loaded.`);\n      this.thumbnailShown = null;\n    },\n    load(visible) {\n      if (visible && this.thumbnailShown !== null) {\n        this.thumbnailShown = true;\n      }\n      if (this.catalog instanceof STAC) {\n        return;\n      }\n      this.$store.commit(visible ? 'queue' : 'unqueue', this.catalog.href);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n@import '../theme/variables.scss';\n\n#stac-browser {\n  .catalog-card {\n\n    &.deprecated {\n      opacity: 0.5;\n\n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    .intro {\n      display: -webkit-box;\n      -webkit-line-clamp: 3;\n      -webkit-box-orient: vertical;\n      overflow: hidden;\n      text-align: left;\n    }\n      \n    .badge.deprecated {\n      text-transform: uppercase;\n    }\n  }\n  .card-list {\n    flex-direction: row;\n\n    .catalog-card {\n      box-sizing: border-box;\n      margin-top: 0.5em;\n      margin-bottom: 0.5em;\n\n      &.has-extent:not(.has-thumbnail) {\n        padding-top: 0.75em;\n      }\n\n      .card-img-right {\n        min-height: 100px;\n        height: 100%;\n        max-height: 8.5rem;\n        max-width: 33%;\n      }\n\n      .intro {\n        display: -webkit-box;\n        -webkit-line-clamp: 2;\n        -webkit-box-orient: vertical;\n        overflow: hidden;\n        text-align: left;\n        margin-bottom: 0;\n      }\n      .datetime {\n        display: inline-block;\n        padding: $border-radius;\n        border: 0;\n        background-color: rgba(0,0,0,0.6);\n        color: map-get($theme-colors, \"light\");\n        border-radius: 0 0 0 $border-radius;\n        position: absolute;\n        top: 0;\n        right: 0;\n        font-size: 80%;\n      }\n    }\n  }\n  .card-columns {\n    .catalog-card {\n      box-sizing: border-box;\n      margin-top: 0.5em;\n      margin-bottom: 0.5em;\n      text-align: center;\n\n      &.queued {\n        min-height: 10rem;\n      }\n\n      .card-img {\n        width: auto;\n        height: auto;\n        max-width: 100%;\n        max-height: 300px;\n      }\n      .card-title {\n        text-align: center;\n      }\n      .datetime {\n        color: map-get($theme-colors, \"secondary\");\n        font-size: 85%;\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Catalog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Catalog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Catalog.vue?vue&type=template&id=1fe55756&\"\nimport script from \"./Catalog.vue?vue&type=script&lang=js&\"\nexport * from \"./Catalog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Catalog.vue?vue&type=style&index=0&id=1fe55756&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = function(md, options) {\n  options = options || {};\n  options.listUnicodeChar = options.hasOwnProperty('listUnicodeChar') ? options.listUnicodeChar : false;\n  options.stripListLeaders = options.hasOwnProperty('stripListLeaders') ? options.stripListLeaders : true;\n  options.gfm = options.hasOwnProperty('gfm') ? options.gfm : true;\n  options.useImgAltText = options.hasOwnProperty('useImgAltText') ? options.useImgAltText : true;\n\n  var output = md || '';\n\n  // Remove horizontal rules (stripListHeaders conflict with this rule, which is why it has been moved to the top)\n  output = output.replace(/^(-\\s*?|\\*\\s*?|_\\s*?){3,}\\s*$/gm, '');\n\n  try {\n    if (options.stripListLeaders) {\n      if (options.listUnicodeChar)\n        output = output.replace(/^([\\s\\t]*)([\\*\\-\\+]|\\d+\\.)\\s+/gm, options.listUnicodeChar + ' $1');\n      else\n        output = output.replace(/^([\\s\\t]*)([\\*\\-\\+]|\\d+\\.)\\s+/gm, '$1');\n    }\n    if (options.gfm) {\n      output = output\n        // Header\n        .replace(/\\n={2,}/g, '\\n')\n        // Fenced codeblocks\n        .replace(/~{3}.*\\n/g, '')\n        // Strikethrough\n        .replace(/~~/g, '')\n        // Fenced codeblocks\n        .replace(/`{3}.*\\n/g, '');\n    }\n    output = output\n      // Remove HTML tags\n      .replace(/<[^>]*>/g, '')\n      // Remove setext-style headers\n      .replace(/^[=\\-]{2,}\\s*$/g, '')\n      // Remove footnotes?\n      .replace(/\\[\\^.+?\\](\\: .*?$)?/g, '')\n      .replace(/\\s{0,2}\\[.*?\\]: .*?$/g, '')\n      // Remove images\n      .replace(/\\!\\[(.*?)\\][\\[\\(].*?[\\]\\)]/g, options.useImgAltText ? '$1' : '')\n      // Remove inline links\n      .replace(/\\[(.*?)\\][\\[\\(].*?[\\]\\)]/g, '$1')\n      // Remove blockquotes\n      .replace(/^\\s{0,3}>\\s?/g, '')\n      // Remove reference-style links?\n      .replace(/^\\s{1,2}\\[(.*?)\\]: (\\S+)( \".*?\")?\\s*$/g, '')\n      // Remove atx-style headers\n      .replace(/^(\\n)?\\s{0,}#{1,6}\\s+| {0,}(\\n)?\\s{0,}#{0,} {0,}(\\n)?\\s{0,}$/gm, '$1$2$3')\n      // Remove emphasis (repeat the line to remove double emphasis)\n      .replace(/([\\*_]{1,3})(\\S.*?\\S{0,1})\\1/g, '$2')\n      .replace(/([\\*_]{1,3})(\\S.*?\\S{0,1})\\1/g, '$2')\n      // Remove code blocks\n      .replace(/(`{3,})(.*?)\\1/gm, '$2')\n      // Remove inline code\n      .replace(/`(.+?)`/g, '$1')\n      // Replace two or more newlines with exactly two? Not entirely sure this belongs here...\n      .replace(/\\n{2,}/g, '\\n\\n');\n  } catch(e) {\n    console.error(e);\n    return md;\n  }\n  return output;\n};\n"],"names":["render","_vm","this","_c","_self","directives","name","rawName","value","load","expression","modifiers","class","classes","attrs","isList","hasImage","staticClass","thumbnail","href","title","crossOriginMedia","on","hideBrokenImg","_e","data","catalog","description","deprecated","_v","_s","_f","temporalExtent","domProps","staticRenderFns","components","StacLink","filters","stripCommonmark","props","type","required","showThumbnail","default","thumbnailShown","computed","methods","console","component","module","exports","md","options","listUnicodeChar","hasOwnProperty","stripListLeaders","gfm","useImgAltText","output","replace","e","error"],"sourceRoot":""}